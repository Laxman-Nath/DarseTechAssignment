package com.bms.swagger;

import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.Operation;
import io.swagger.v3.oas.models.PathItem;
import io.swagger.v3.oas.models.info.Info;
import jakarta.servlet.ServletContextEvent;
import jakarta.servlet.ServletContextListener;
import jakarta.servlet.annotation.WebListener;

public class OpenApiContextListener implements ServletContextListener {
	@Override
	public void contextInitialized(ServletContextEvent sce) {
		OpenAPI openAPI = new OpenAPI()
				.info(new Info().title("Book API").description("API for managing books").version("1.0.0"));

		
		openAPI.path("/addBook",
				new PathItem()
						.get(new Operation().summary("add book to database")
								.description("This endpoint returns a list of products."))
						.post(new Operation().summary("Create a new product")
								.description("This endpoint creates a new product.")));

		sce.getServletContext().setAttribute("openAPI", openAPI);
	}

	@Override
	public void contextDestroyed(ServletContextEvent sce) {
		// Optional cleanup
	}
}
